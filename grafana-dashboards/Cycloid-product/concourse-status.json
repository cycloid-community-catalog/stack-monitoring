{
	"annotations": {
		"list": [
			{
				"$$hashKey": "object:306",
				"builtIn": 1,
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": true,
				"hide": true,
				"iconColor": "rgba(0, 211, 255, 1)",
				"name": "Annotations & Alerts",
				"type": "dashboard"
			}
		]
	},
	"editable": true,
	"fiscalYearStartMonth": 0,
	"gnetId": 7036,
	"graphTooltip": 1,
	"id": 687,
	"links": [],
	"panels": [
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 0
			},
			"id": 61,
			"panels": [
				{
					"cards": {},
					"color": {
						"cardColor": "#b4ff00",
						"colorScale": "sqrt",
						"colorScheme": "interpolateRdYlGn",
						"exponent": 0.5,
						"max": 0,
						"min": 1,
						"mode": "spectrum"
					},
					"dataFormat": "tsbuckets",
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"description": "if this is RED, it means at least one component is unhealthy (e.g. failing worker). it does not imply concourse is down.\n\nthis graph uses bosh health to determine if the cluster is healthy. this is not perfect, as bosh primarily just ensures the cluster components are running, not if they are in a good state.",
					"fieldConfig": {
						"defaults": {
							"custom": {
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"scaleDistribution": {
									"type": "linear"
								}
							}
						},
						"overrides": []
					},
					"gridPos": {
						"h": 10,
						"w": 24,
						"x": 0,
						"y": 1
					},
					"heatmap": {},
					"hideZeroBuckets": false,
					"highlightCards": true,
					"id": 33,
					"interval": "$time_interval",
					"legend": {
						"show": false
					},
					"options": {
						"calculate": false,
						"calculation": {},
						"cellGap": 2,
						"cellValues": {},
						"color": {
							"exponent": 0.5,
							"fill": "#b4ff00",
							"max": 1,
							"min": 0,
							"mode": "scheme",
							"reverse": true,
							"scale": "exponential",
							"scheme": "RdYlGn",
							"steps": 128
						},
						"exemplars": {
							"color": "rgba(255,0,255,0.7)"
						},
						"filterValues": {
							"le": 1e-9
						},
						"legend": {
							"show": false
						},
						"rowsFrame": {
							"layout": "unknown"
						},
						"showValue": "never",
						"tooltip": {
							"mode": "single",
							"showColorScale": false,
							"yHistogram": false
						},
						"yAxis": {
							"axisPlacement": "left",
							"reverse": true,
							"unit": "percentunit"
						}
					},
					"pluginVersion": "10.4.1",
					"reverseYBuckets": true,
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "min(min_over_time(kube_pod_container_status_ready{pod=~\"concourse-web-.+\", namespace=~\"$namespace\"}[$__interval])) by (pod)",
							"format": "time_series",
							"instant": false,
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "pod: {{ pod }}",
							"refId": "A"
						},
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "min(min_over_time(probe_success{product=\"concourse\", namespace=~\"$namespace\"}[$__interval])) by (instance)",
							"format": "time_series",
							"hide": false,
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "probe: {{ instance }}",
							"refId": "B"
						}
					],
					"title": "Pod concourse web health (group: $time_interval)",
					"tooltip": {
						"show": true,
						"showHistogram": false
					},
					"transparent": true,
					"type": "heatmap",
					"xAxis": {
						"show": true
					},
					"yAxis": {
						"format": "percentunit",
						"logBase": 1,
						"show": true
					},
					"yBucketBound": "middle"
				}
			],
			"title": "Concourse Web Status",
			"type": "row"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 1
			},
			"id": 63,
			"panels": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "containers",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 0,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"min": 0,
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 8,
						"w": 11,
						"x": 0,
						"y": 4
					},
					"id": 27,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [
								"mean",
								"max"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"editorMode": "code",
							"exemplar": true,
							"expr": "avg(\n  concourse_workers_containers{namespace=~\"$namespace\"}\n) by (namespace, worker)",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{worker}}",
							"range": true,
							"refId": "A"
						}
					],
					"title": "Cluster container per worker",
					"transparent": true,
					"type": "timeseries"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "containers",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 0,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"min": 0,
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 8,
						"w": 12,
						"x": 11,
						"y": 4
					},
					"id": 26,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [
								"mean",
								"max"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(concourse_workers_containers{namespace=~\"$namespace\"}) by (namespace, cluster)",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{ cluster }}",
							"refId": "A"
						}
					],
					"title": "Cluster container total count",
					"transparent": true,
					"type": "timeseries"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "jobs scheduled",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 0,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"min": 0,
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 7,
						"w": 24,
						"x": 0,
						"y": 12
					},
					"id": 57,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [
								"mean",
								"max"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_jobs_scheduled_total{namespace=~\"$namespace\"}[$__interval])) by (namespace, cluster)",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{ cluster }}",
							"refId": "A"
						}
					],
					"title": "Jobs scheduled (per $time_interval)",
					"transparent": true,
					"type": "timeseries"
				}
			],
			"title": "Nr of Containers and Jobs",
			"type": "row"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 2
			},
			"id": 64,
			"panels": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"description": "",
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "bars",
								"fillOpacity": 100,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "s"
						},
						"overrides": [
							{
								"matcher": {
									"id": "byValue",
									"options": {
										"op": "gte",
										"reducer": "allIsZero",
										"value": 0
									}
								},
								"properties": [
									{
										"id": "custom.hideFrom",
										"value": {
											"legend": true,
											"tooltip": true,
											"viz": false
										}
									}
								]
							},
							{
								"matcher": {
									"id": "byValue",
									"options": {
										"op": "gte",
										"reducer": "allIsNull",
										"value": 0
									}
								},
								"properties": [
									{
										"id": "custom.hideFrom",
										"value": {
											"legend": true,
											"tooltip": true,
											"viz": false
										}
									}
								]
							}
						]
					},
					"gridPos": {
						"h": 8,
						"w": 24,
						"x": 0,
						"y": 3
					},
					"id": 24,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [
								"max"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "single",
							"sort": "none"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "topk(\r5,\r\n    sort_desc(\r\n        sum(\r\n            increase(\rconcourse_builds_duration_seconds_sum{namespace=~\"$namespace\"}[30m]\r)\n        \r) by (\n            namespace, team, pipeline\n        )\n\r    )\r\n\r)",
							"format": "time_series",
							"interval": "30m",
							"intervalFactor": 1,
							"legendFormat": "{{ namespace }}/{{ team }}/{{ pipeline }}",
							"refId": "C"
						}
					],
					"title": "Top 5 run durations per pipeline (per $time_interval)",
					"transparent": true,
					"type": "timeseries"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 10,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": [
							{
								"matcher": {
									"id": "byName",
									"options": "total"
								},
								"properties": [
									{
										"id": "color",
										"value": {
											"fixedColor": "#E02F44",
											"mode": "fixed"
										}
									},
									{
										"id": "custom.fillOpacity",
										"value": 50
									}
								]
							}
						]
					},
					"gridPos": {
						"h": 7,
						"w": 12,
						"x": 0,
						"y": 11
					},
					"id": 54,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [
								"sum"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_builds_failed_total{namespace=~\"$namespace\"}[$__interval])) by (namespace, cluster)",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{ cluster }}",
							"refId": "A"
						},
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_builds_failed_total{namespace=~\"$namespace\"}[$__interval]))",
							"hide": false,
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "total",
							"refId": "B"
						}
					],
					"title": "Nr of Failed Pipelines (per $time_interval)",
					"transparent": true,
					"type": "timeseries"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 10,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 7,
						"w": 12,
						"x": 12,
						"y": 11
					},
					"id": 59,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [
								"sum"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_builds_errored_total{namespace=~\"$namespace\"}[$__interval])) by (namespace, cluster)",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{ cluster }}",
							"refId": "A"
						}
					],
					"title": "Nr of errored pipelines - concourse errors (per $time_interval)",
					"transparent": true,
					"type": "timeseries"
				}
			],
			"title": "Pipelines Status",
			"type": "row"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 3
			},
			"id": 65,
			"panels": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 0,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"min": 0,
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "percentunit"
						},
						"overrides": [
							{
								"matcher": {
									"id": "byName",
									"options": "all clusters avg"
								},
								"properties": [
									{
										"id": "color",
										"value": {
											"fixedColor": "#E02F44",
											"mode": "fixed"
										}
									},
									{
										"id": "custom.fillOpacity",
										"value": 50
									}
								]
							},
							{
								"matcher": {
									"id": "byName",
									"options": "all clusters avg: -1w"
								},
								"properties": [
									{
										"id": "color",
										"value": {
											"fixedColor": "#FFEE52",
											"mode": "fixed"
										}
									},
									{
										"id": "custom.lineStyle",
										"value": {
											"dash": [
												10,
												10
											],
											"fill": "dash"
										}
									}
								]
							},
							{
								"matcher": {
									"id": "byValue",
									"options": {
										"op": "gte",
										"reducer": "allIsZero",
										"value": 0
									}
								},
								"properties": [
									{
										"id": "custom.hideFrom",
										"value": {
											"legend": true,
											"tooltip": true,
											"viz": false
										}
									}
								]
							}
						]
					},
					"gridPos": {
						"h": 8,
						"w": 11,
						"x": 0,
						"y": 2
					},
					"id": 60,
					"interval": "1h",
					"options": {
						"legend": {
							"calcs": [
								"mean",
								"max"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_lidar_checks_finished_total{namespace=~\"$namespace\", status=\"error\"}[$__interval])) by (pod) / sum(increase(concourse_lidar_checks_started_total{namespace=~\"$namespace\"}[$__interval])) by (pod)",
							"interval": "",
							"legendFormat": "errored: {{ pod }}",
							"refId": "C"
						},
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_lidar_checks_finished_total{namespace=~\"$namespace\", status=\"error\"}[$__interval])) / sum(increase(concourse_lidar_checks_started_total{namespace=~\"$namespace\"}[$__interval]))",
							"hide": false,
							"interval": "",
							"legendFormat": "all clusters avg",
							"refId": "A"
						},
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_lidar_checks_finished_total{namespace=~\"$namespace\", status=\"error\"}[$__interval] offset 7d)) / sum(increase(concourse_lidar_checks_started_total{namespace=~\"$namespace\"}[$__interval] offset 7d))",
							"hide": false,
							"interval": "",
							"legendFormat": "all clusters avg: -1w",
							"refId": "B"
						}
					],
					"title": "Resource checks (started/finished/errored every 1h)",
					"transparent": true,
					"type": "timeseries"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 0,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"min": 0,
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": [
							{
								"matcher": {
									"id": "byRegexp",
									"options": "/errored: .*/i"
								},
								"properties": [
									{
										"id": "color",
										"value": {
											"fixedColor": "#C4162A",
											"mode": "fixed"
										}
									},
									{
										"id": "custom.fillOpacity",
										"value": 10
									}
								]
							},
							{
								"matcher": {
									"id": "byValue",
									"options": {
										"op": "gte",
										"reducer": "allIsZero",
										"value": 0
									}
								},
								"properties": [
									{
										"id": "custom.hideFrom",
										"value": {
											"legend": true,
											"tooltip": true,
											"viz": false
										}
									}
								]
							}
						]
					},
					"gridPos": {
						"h": 8,
						"w": 13,
						"x": 11,
						"y": 2
					},
					"id": 55,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [
								"mean",
								"max"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_lidar_checks_started_total{namespace=~\"$namespace\"}[$__interval])) by (namespace, pod)",
							"hide": false,
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "started: {{ pod }}",
							"refId": "A"
						},
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_lidar_checks_finished_total{namespace=~\"$namespace\", status=\"success\"}[$__interval])) by (namespace, pod)",
							"interval": "",
							"legendFormat": "finished: {{ pod }}",
							"refId": "B"
						},
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_lidar_checks_finished_total{namespace=~\"$namespace\", status=\"error\"}[$__interval])) by (namespace, pod)",
							"interval": "",
							"legendFormat": "errored: {{ pod }}",
							"refId": "C"
						}
					],
					"title": "Nr of resource checks status (started/finished/errored) (every $time_interval)",
					"transparent": true,
					"type": "timeseries"
				}
			],
			"title": "Concourse Resource Status",
			"type": "row"
		},
		{
			"collapsed": true,
			"datasource": {
				"type": "prometheus",
				"uid": "prometheus"
			},
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 4
			},
			"id": 47,
			"panels": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 10,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 6,
						"w": 12,
						"x": 0,
						"y": 5
					},
					"id": 51,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [],
							"displayMode": "list",
							"placement": "bottom",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "none"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(irate(concourse_db_queries_total{namespace=~\"$namespace\"}[$__interval])) by (pod) / 300",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{ pod }}",
							"refId": "A"
						}
					],
					"title": "Database queries per second",
					"transparent": true,
					"type": "timeseries"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 10,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 6,
						"w": 12,
						"x": 12,
						"y": 5
					},
					"id": 52,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [],
							"displayMode": "list",
							"placement": "bottom",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "none"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_db_connections{namespace=~\"$namespace\"}[$__interval])) by (pod, dbname)",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{ pod }}/{{ dbname }}",
							"refId": "A"
						}
					],
					"title": "Database connections (per $time_interval)",
					"transparent": true,
					"type": "timeseries"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 10,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 6,
						"w": 12,
						"x": 0,
						"y": 11
					},
					"id": 53,
					"interval": "$time_interval",
					"options": {
						"legend": {
							"calcs": [],
							"displayMode": "list",
							"placement": "bottom",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "sum(increase(concourse_locks_held{namespace=~\"$namespace\"}[$__interval])) by (pod, type)",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{ pod }}/{{ type }}",
							"refId": "A"
						}
					],
					"title": "Database locks held (per $time_interval)",
					"transparent": true,
					"type": "timeseries"
				}
			],
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"refId": "A"
				}
			],
			"title": "Concourse Database",
			"type": "row"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 5
			},
			"id": 62,
			"panels": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"fillOpacity": 80,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"lineWidth": 1,
								"scaleDistribution": {
									"type": "linear"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							}
						},
						"overrides": []
					},
					"gridPos": {
						"h": 9,
						"w": 12,
						"x": 0,
						"y": 6
					},
					"id": 12,
					"interval": "$time_interval",
					"options": {
						"barRadius": 0,
						"barWidth": 0.97,
						"fullHighlight": false,
						"groupWidth": 0.7,
						"legend": {
							"calcs": [],
							"displayMode": "list",
							"placement": "bottom",
							"showLegend": true
						},
						"orientation": "auto",
						"showValue": "auto",
						"stacking": "none",
						"tooltip": {
							"mode": "single",
							"sort": "none"
						},
						"xTickLabelRotation": 0,
						"xTickLabelSpacing": 0
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"exemplar": true,
							"expr": "topk(30, sort_desc(sum(concourse_builds_finished{namespace=~\"$namespace\"}) by (pipeline)))",
							"format": "time_series",
							"instant": true,
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{pipeline}}",
							"refId": "A"
						}
					],
					"title": "Top 30 Finished pipeline builds",
					"transparent": true,
					"type": "barchart"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "prometheus"
					},
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"axisBorderShow": false,
								"axisCenteredZero": false,
								"axisColorMode": "text",
								"axisLabel": "",
								"axisPlacement": "auto",
								"barAlignment": 0,
								"drawStyle": "line",
								"fillOpacity": 10,
								"gradientMode": "none",
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								},
								"insertNulls": false,
								"lineInterpolation": "linear",
								"lineWidth": 1,
								"pointSize": 5,
								"scaleDistribution": {
									"type": "linear"
								},
								"showPoints": "never",
								"spanNulls": false,
								"stacking": {
									"group": "A",
									"mode": "none"
								},
								"thresholdsStyle": {
									"mode": "off"
								}
							},
							"links": [],
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green"
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 9,
						"w": 12,
						"x": 12,
						"y": 6
					},
					"id": 58,
					"interval": "5m",
					"options": {
						"legend": {
							"calcs": [
								"sum"
							],
							"displayMode": "table",
							"placement": "right",
							"showLegend": true
						},
						"tooltip": {
							"mode": "multi",
							"sort": "desc"
						}
					},
					"pluginVersion": "10.4.1",
					"targets": [
						{
							"datasource": {
								"type": "prometheus",
								"uid": "prometheus"
							},
							"editorMode": "code",
							"exemplar": true,
							"expr": "topk(10, sum(increase(concourse_error_logs{namespace=~\"$namespace\"}[$__interval])) by (cluster, message)) > 0",
							"interval": "",
							"intervalFactor": 1,
							"legendFormat": "{{ cluster }}/{{ message }}",
							"range": true,
							"refId": "A"
						}
					],
					"title": "Top 10 Concourse Errors (per 5m)",
					"transparent": true,
					"type": "timeseries"
				}
			],
			"title": "Statistics",
			"type": "row"
		}
	],
	"refresh": "30s",
	"schemaVersion": 39,
	"tags": [
		"cycloid.io",
		"concourse"
	],
	"templating": {
		"list": [
			{
				"allValue": ".+",
				"current": {
					"selected": false,
					"text": "infra",
					"value": "infra"
				},
				"datasource": {
					"type": "prometheus",
					"uid": "prometheus"
				},
				"definition": "label_values(concourse_db_queries_total, namespace)",
				"hide": 0,
				"includeAll": true,
				"label": "namespace",
				"multi": false,
				"name": "namespace",
				"options": [],
				"query": {
					"query": "label_values(concourse_db_queries_total, namespace)",
					"refId": "StandardVariableQuery"
				},
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"tagValuesQuery": "",
				"tagsQuery": "",
				"type": "query",
				"useTags": false
			},
			{
				"auto": true,
				"auto_count": 50,
				"auto_min": "30s",
				"current": {
					"selected": false,
					"text": "auto",
					"value": "$__auto_interval_time_interval"
				},
				"hide": 0,
				"label": "time interval",
				"name": "time_interval",
				"options": [
					{
						"selected": true,
						"text": "auto",
						"value": "$__auto_interval_time_interval"
					},
					{
						"selected": false,
						"text": "1m",
						"value": "1m"
					},
					{
						"selected": false,
						"text": "10m",
						"value": "10m"
					},
					{
						"selected": false,
						"text": "30m",
						"value": "30m"
					},
					{
						"selected": false,
						"text": "1h",
						"value": "1h"
					},
					{
						"selected": false,
						"text": "6h",
						"value": "6h"
					},
					{
						"selected": false,
						"text": "12h",
						"value": "12h"
					},
					{
						"selected": false,
						"text": "1d",
						"value": "1d"
					},
					{
						"selected": false,
						"text": "7d",
						"value": "7d"
					},
					{
						"selected": false,
						"text": "14d",
						"value": "14d"
					},
					{
						"selected": false,
						"text": "30d",
						"value": "30d"
					}
				],
				"query": "1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",
				"queryValue": "",
				"refresh": 2,
				"skipUrlSync": false,
				"type": "interval"
			}
		]
	},
	"time": {
		"from": "now-12h",
		"to": "now"
	},
	"timepicker": {
		"refresh_intervals": [
			"5s",
			"10s",
			"30s",
			"1m",
			"5m",
			"15m",
			"30m",
			"1h",
			"2h",
			"1d"
		],
		"time_options": [
			"5m",
			"15m",
			"1h",
			"6h",
			"12h",
			"24h",
			"2d",
			"7d",
			"30d"
		]
	},
	"timezone": "",
	"title": "Concourse Metrics Status",
	"uid": "7lYytQdmz",
	"version": 7,
	"weekStart": ""
}